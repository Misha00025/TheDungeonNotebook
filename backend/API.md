# API

Запросы к API выполняются по шаблону url: ``api/<версия>/<метод>``. Для API версии "v0" версия в адресной строке не указывается

## Уровни доступа

Для каждого запроса существует свой уровень доступа. Согласно уровням доступа для разных запросов могут требоваться разные данные в заголовках (headers) запроса. <br/>
Далее показан список уровней доступа и их описание:
- всем (all) - уровень доступа не требующий каких-то особых условий для использования (доступен всем без авторизации);
- группам (groups) - уровень доступа, при котором требуется передать валидный сервисный ключ (`Service-token`) в заголовке запроса;
- пользователям (users) - уровень доступа, при котором необходимо передать валидный ключ пользователя (`token`) в заголовке запроса;
- пользователям и группам (users_and_groups) - уровень доступа, объединяющий предыдущие два. Допускает выполнения одного из указанных условий.

## Версия "v0"

Исходняя версия API переживающая постоянные удаления старых методов. <br/>
В ближайшее время будет содержать исключительно общедоступные методы, как get_api, auth и check_access

### get_api

Доступ: **всем**<br/>
Метод: **GET**

Запрос возвращает json схему, содержащую список версий api и доступные методы. <br/> 
Формат ответа выглядит следующим образом:
```json
{
  "api_methods": {
    "v0": [
      {
        "access_to": "all",
        "methods": [
          "GET"
        ],
        "url": "/api/get_api"
      },
      ...
    ]
    "v1": [
        ...
    ]
  }
}
```
`access_to` - показывает уровень доступа к запросу


### auth

Доступ: **всем**<br/>
Метод: POST<br/>

Запрос выполняющий авторизацию пользователя в api. <br/>
В теле ответа передаёт:
- `access_token` - ключ доступа пользователя к функциям API.

В теле запроса необходимо передать ответ, получаемый от серверов vk.ru при авторизации с помощью VK ID. 

### check_access

Доступ: **пользователям** и **группам**<br/>
Метод: GET

Запрос возвращает код 401, если авторизация провалилась и 200, если авторизация прошла. В случае успешной авторизации в теле запроса передаётся тип доступа: `access.type = user | group`.

### groups

Доступ: **пользователям**<br/>
Метод: GET

Запрос возвращает список групп в теле ответа в формате json. Список передаётся в поле `groups`.

Каждая группа содержит в себе следующие поля:
- `id` - индекс группы;
- `name` - название группы;
- `privileges` - привелегии группы (не реализовано).
