# Оглавление

- [Оглавление](#оглавление)
- [Уровни доступа](#уровни-доступа)
- [Структуры данных](#структуры-данных)
  - [Общая структура](#общая-структура)
  - [Пользователь (user)](#пользователь-user)
  - [Группа (group)](#группа-group)
  - [Персонаж (character)](#персонаж-character)
  - [Предмет (item)](#предмет-item)
  - [Шаблон персонажа (character\_template)](#шаблон-персонажа-character_template)
- [Методы](#методы)

# Уровни доступа

Каждый запрос к API проходит две проверки: 
- Проверка доступа к ресурсу;
- Проверка уровня доступа.

Для первой проверки предусмотрено 3 ресурса:
- Пользователь (User);
- Группа (Group);
- Персонаж (Character).

Для описания доступа к ресурсу у каждого запроса добавлена строка `"Ресурс: <название_ресурса>"`. Если ресурс не указан, то метод доступен без авторизации. 

Для каждого ресурса предусмотрены 3 уровня доступа:
- Чтение (Read);
- Изменение (Write);
- Полный доступ (Full).

Уровень доступа указывается в графе `"Доступ: <уровень_доступа>"`.Если уровень доступа не указан, то по-умолчанию он считается как "Чтение".

# Структуры данных

В этой главе описаны структуры данных, возвращаемые со стороны API

## Общая структура

Каждый возвращаемый элемент данных содержит следующую структуру:

```json
{
  "type": "...",
  "data": {
    //...
  },
  // additions
}
```
Поле `data` заполняется данными, специфичными для выбранного типа ресурса.

В качестве дополнительных элементов данных могут быть:
- `access_level`, в котором может быть одно из 4 значений:
  - `None` - нет доступа;
  - `Follower` - Уровень доступа "Чтение";
  - `Moderator` - Уровень доступа "Изменение";
  - `Admin` - Уровень доступа "Полный";

## Пользователь (user)

```json
{
  "id": "...",
  "first_name": "...",
  "last_name": "...",
  "photo_link": "..."
}
```

## Группа (group)

```json
{
  "id": "...",
  "name": "...",
  "description": "...",
  "admins":[
    // users with role "Admin"
  ],
  "characters":[
    // characters
  ],
  // additions
}
```

В поле `admins` записываются пользователи с уровнем доступа `"Admin"` в соответствии со структурой [`user`](#пользователь-user).

В поле `characters` записываются персонажи, к которым есть доступ, в соответствии со структурой [`character`](#персонаж-character)

Возможные дополнительные поля:
- `users` - список всех пользователей, согласно структуре [`character`](#персонаж-character);
- `items` - список всех предметов группы, согласно структуре [`item`](#предмет-item);
- `character_templates` - список всех шаблонов персонажа, согласно структуре ;

## Персонаж (character)

```json
{
  "id": "...",
  "name": "...",
  "description": "...",
  // additions
  // template fields
}
```

Возможные дополнительные поля:
- `inventory` - список всех предметов персонажа, записанных согласно структуре [`item`](#предмет-item);
- `template` - содержит основную информацию об используемом шаблоне персонажа. Имеет следующую структуру:
  ```json
  {
    // TODO: доделать
  }
  ```

`// template fields`

## Предмет (item)

```json
{
  // TODO: доделать
}
```

## Шаблон персонажа (character_template)

```json
{
  // TODO: доделать
}
```

# Методы

API на данный момент находится в разработке, всвязи с чем некоторые методы могут перестать работать/существовать/поддерживаться.

Ниже описаны уже реализованные методы или методы планируемые к реализации.

